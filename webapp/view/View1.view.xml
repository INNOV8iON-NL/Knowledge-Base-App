<mvc:View
    controllerName="articlesfreestyle.controller.View1"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
>
    <Page
        id="page"
        class="knowledgeBaseApp"
    >
        <content>
            <smartFilterBar:SmartFilterBar
                id="smartFilterId"
                entitySet="Articles"
            >
                <smartFilterBar:controlConfiguration>
                    <smartFilterBar:ControlConfiguration
                        key="Title"
                        visible="true"
                        index="1"
                        filterType="searchExpression"
                    />
                    <smartFilterBar:ControlConfiguration
                        key="Description"
                        visible="true"
                        index="2"
                        filterType="searchExpression"
                    />
                    <smartFilterBar:ControlConfiguration
                        key="CreatedBy"
                        visible="true"
                        index="3"
                        filterType="searchExpression"
                    />
                </smartFilterBar:controlConfiguration>

                <smartFilterBar:layoutData>
                    <FlexItemData shrinkFactor="0" />
                </smartFilterBar:layoutData>
            </smartFilterBar:SmartFilterBar>

            <smartTable:SmartTable
                id="smartTableId"
                entitySet="Articles"
                smartFilterId="smartFilterId"
                tableType="ResponsiveTable"
                useVariantManagement="true"
                useTablePersonalisation="true"
                header="Articles"
                showFullScreenButton="true"
                showRowCount="true"
                persistencyKey="SmartTableAnalytical_Explored"
                enableAutoBinding="true"
                class="sapUiResponsiveContentPadding"
                initiallyVisibleFields="Title,Description,CreatedBy,ChangedAt,Category"
                requestAtLeastFields="GuID"
            >
                <smartTable:customToolbar>
                    <OverflowToolbar design="Transparent">
                        <ToolbarSpacer />
                        <OverflowToolbarButton
                            icon="sap-icon://delete"
                            tooltip="Delete"
                            text="Delete"
                            press=".onDelete"
                            id="deleteId"
                            visible="false"
                        />
                        <OverflowToolbarButton
                            icon="sap-icon://create"
                            tooltip="Create new article"
                            text="Create"
                            press="onCreate"
                        />
                    </OverflowToolbar>
                </smartTable:customToolbar>
                <Table
                    id="innerTableId"
                    mode="MultiSelect"
                    selectionChange=".onSelectionChange"
                >
                    <columns>
                        <Column
                            id="Category"
                            hAlign="Begin"
                        >
                            <customData>
                                <core:CustomData
                                    key="p13nData"
                                    value='\{"columnKey": "Category", "columnIndex": "80"}'
                                />
                            </customData>
                            <Text text="Category" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem
                            type="Navigation"
                            press=".onDetailPress"
                        >
                            <cells>
                                <List
                                    id="tagListId"
                                    items="{ path: 'to_tags'}"
                                    width="100%"
                                >
                                    <DisplayListItem value="{TagName}" />
                                </List>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </smartTable:SmartTable>
        </content>
    </Page>
</mvc:View>
<!-- 
                     <m:Table
                width="100%"
                items="{
                    path: '/Articles'
                    }"
                selectionChange=".onSelectionChange"
                id="idTable"
                mode="MultiSelect"
                inset="false"
                growing="true"
            >
                <m:infoToolbar>
                    <m:OverflowToolbar
                        visible="false"
                        id="idInfoToolbar"
                    >
                        <m:Label id="idFilterLabel" />
                    </m:OverflowToolbar>
                </m:infoToolbar>
                <m:columns>
                    <m:Column visible="false">
                        <m:Text text="GUID" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Title" />
                    </m:Column>
                    <m:Column width="35%">
                        <m:Text text="Description" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Last changed at" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Created by" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Categories" />
                    </m:Column>
                </m:columns>
                <m:items>
                    <m:ColumnListItem
                        type="Navigation"
                        press=".onDetailPress"
                    >
                        <m:cells>
                            <m:Text text="{GuID}" />
                            <m:Text text="{Title}" />
                            <m:ExpandableText text="{Description}" />

                            <m:Text
                                text="{
                                path: 'LocalLastChangedAt',
                                type: 'sap.ui.model.type.DateTime',
                                formatOptions: {
                                    style: 'medium'
                                }
                                }"
                            />
                            <m:Text text="{CreatedBy}" />
                            <m:List
                                id="tagListId"
                                items="{ path: 'to_tags'}"
                                width="100%"
                            >
                                <m:DisplayListItem value="{TagName}" />
                            </m:List>
                        </m:cells>
                    </m:ColumnListItem>
                </m:items>
            </m:Table> -->
<!-- <m:VBox>
                <m:Panel>
                    <m:FlexBox renderType="Div">
                        <m:SearchField
                            width="70%"
                            liveChange=".onSearch"
                            tooltip="Search keywords in title, description or creator"
                        >
                            <m:layoutData>
                                <m:FlexItemData growFactor="60" />
                            </m:layoutData>
                        </m:SearchField>

                        <m:SearchField
                            width="70%"
                            placeholder="Search for a category"
                            enableSuggestions="true"
                            suggest=".onSuggest"
                            search=".onSearchCategory"
                            id="searchCategoryID"
                            suggestionItems="{
				            path: '/UniqueTags'
                            }"
                            liveChange=".onSuggest"
                        >
                            <m:layoutData>
                                <m:FlexItemData growFactor="60" />
                            </m:layoutData>
                            <m:SuggestionItem
                                key="{TagName}"
                                text="{TagName}"
                            />
                        </m:SearchField>

                        <m:Button
                            text="Sort by Title"
                            press=".onSortTitles"
                            icon="sap-icon://sort"
                            tooltip="Sort by titles A-Z / Z-A"
                        >
                            <m:layoutData>
                                <m:FlexItemData growFactor="1" />
                            </m:layoutData>
                        </m:Button>
                        <m:Button
                            text="Sort by Date"
                            press=".onSortDates"
                            icon="sap-icon://sort"
                            tooltip="Sort by last changed date DESC / ASC"
                        >
                            <m:layoutData>
                                <m:FlexItemData growFactor="1" />
                            </m:layoutData>
                        </m:Button>
                        <m:Button
                            text="Create"
                            type="Emphasized"
                            press=".onCreate"
                            icon="sap-icon://create"
                        >
                            <m:layoutData>
                                <m:FlexItemData growFactor="1" />
                            </m:layoutData>
                        </m:Button>

                        <m:Button
                            text="Delete"
                            press=".onDelete"
                            icon="sap-icon://delete"
                        >
                            <m:layoutData>
                                <m:FlexItemData growFactor="1" />
                            </m:layoutData>
                        </m:Button>
                    </m:FlexBox>
                </m:Panel>
            </m:VBox> -->
<!-- <m:Table
                width="100%"
                items="{
                    path: '/Articles'
                    }"
                selectionChange=".onSelectionChange"
                id="idTable"
                mode="MultiSelect"
                inset="false"
                growing="true"
            >
                <m:infoToolbar>
                    <m:OverflowToolbar
                        visible="false"
                        id="idInfoToolbar"
                    >
                        <m:Label id="idFilterLabel" />
                    </m:OverflowToolbar>
                </m:infoToolbar>
                <m:columns>
                    <m:Column visible="false">
                        <m:Text text="GUID" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Title" />
                    </m:Column>
                    <m:Column width="35%">
                        <m:Text text="Description" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Last changed at" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Created by" />
                    </m:Column>
                    <m:Column width="15%">
                        <m:Text text="Categories" />
                    </m:Column>
                </m:columns>
                <m:items>
                    <m:ColumnListItem
                        type="Navigation"
                        press=".onDetailPress"
                    >
                        <m:cells>
                            <m:Text text="{GuID}" />
                            <m:Text text="{Title}" />
                            <m:ExpandableText text="{Description}" />

                            <m:Text
                                text="{
                                path: 'LocalLastChangedAt',
                                type: 'sap.ui.model.type.DateTime',
                                formatOptions: {
                                    style: 'medium'
                                }
                                }"
                            />
                            <m:Text text="{CreatedBy}" />
                            <m:List
                                id="tagListId"
                                items="{ path: 'to_tags'}"
                                width="100%"
                            >
                                <m:DisplayListItem value="{TagName}" />
                            </m:List>
                        </m:cells>
                    </m:ColumnListItem>
                </m:items>
            </m:Table> -->
